{% extends 'layout.html' %}
{% block content %}
{# add quiz form #}
<script src="{{ url_for('static', filename='quizQuestion.js') }}"></script>
<script>
    function factQuestion(form) {
        form.innerHTML =`    
        {{ fact_form.csrf_token }}
        {{ fact_form.fact_statement }}
        {{ fact_form.fact_answer }}
        {{ fact_form.submit }}
        `;
    };
    function writtenQuestion(form) {
        form.innerHTML = `
        {{ written_form.csrf_token }}
        {{ written_form.written_question }}
        {{ written_form.written_answer }}
        {{ written_form.submit }}
        `;
    };
    function multiChoiceForm(form) {
        form.innerHTML = `
        {{ multi_choice_form.csrf_token }}
        {{ multi_choice_form.multi_question }}
        {{ multi_choice_form.correct_answer }}
        {{ multi_choice_form.false_one }}
        {{ multi_choice_form.false_two }}
        {{ multi_choice_form.false_three }}
        {{ multi_choice_form.submit }}
        `;
    };
</script>
<div class="display-one-quiz">
    <div class="quiz-info">
        <h2>{{ quiz.name }}</h2>
        <p>{{ quiz.description }}</p>
    </div>
    <div class="attempt-button">
        <form action="{{ url_for('attempt_quiz', quiz_id=quiz_id) }}">
            <input type="submit" value="Start quiz">
        </form>
    </div>
    <div class="leaderboard">
        <h3>Leaderboard</h3>
        {% for u in quiz.user_score %}
            {{ u.user.username }}
            {{ u.score }}
            {{ u.time }}
        {% endfor %}
    </div>
    <div class="questions">
        {# loop through all questions in quiz #}
        {% if quiz.questions %}
        {% for question in quiz.questions %}
        <div class="question">
            <p>{{ types[question.type] }} question</p>
            <p>Question : {{ question.question }}</p>
            {% if quiz.user_id == current_user.user_id %}
                <p>Correct answer: {{ question.answers[0].answer }}</p>
                {% if question.falseAnswer %}
                    <p>False answer: 
                        {% for f in question.falseAnswer %}
                        {{ f.answer }}, 
                        {% endfor %}
                    </p>
                {% endif %}
            {% endif %}
        </div>
        {% endfor %}
        {% endif %}
    </div>
    {% if quiz.user_id == current_user.user_id %}
        <div class="edit-quiz">
            <div class="select-buttons">
                <button onclick="addQuestion(1)">Add True/False question</button>
                <button onclick="addQuestion(2)">Add written answer question</button>
                <button onclick="addQuestion(3)">Add multiple choice question</button>
            </div>
            <div id="create-question">
            </div>
        </div>
    {% endif %}
</div>
{% endblock %}
